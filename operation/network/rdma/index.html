
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="ZJUSCT Documents & Blogs">
      
      
        <meta name="author" content="ZJUSCT">
      
      
        <link rel="canonical" href="https://docs.zjusct.io/operation/network/rdma/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../network-technology/ipv6/">
      
      
      <link rel="icon" href="../../../assets/zjusct.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>RDMA - ZJUSCT 文档与博客</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/fonts.css">
    
      <link rel="stylesheet" href="../../../stylesheets/counter.css">
    
      <link rel="stylesheet" href="../../../stylesheets/theme.css">
    
      <link rel="stylesheet" href="../../../stylesheets/neoteroi-v1.1.2.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rdma" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ZJUSCT 文档与博客" class="md-header__button md-logo" aria-label="ZJUSCT 文档与博客" data-md-component="logo">
      
  <img src="../../../assets/zjusct.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ZJUSCT 文档与博客
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              RDMA
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="indigo"  aria-label="切换至浅色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换至浅色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="zjusct" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换至深色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换至深色模式" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="根据系统模式切换主题"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="根据系统模式切换主题" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/ZJUSCT/docs.zjusct.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    docs.zjusct.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../.." class="md-tabs__link">
          
  
  
    
  
  首页

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../competition/" class="md-tabs__link">
          
  
  
    
  
  🏆 竞赛

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../falcon/" class="md-tabs__link">
          
  
  
    
  
  🦅 Falcon

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../optimization/" class="md-tabs__link">
          
  
  
    
  
  🔧 优化

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  ⚙️ 运维

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blog/" class="md-tabs__link">
          
  
  
    
  
  ✍️ 博客

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ZJUSCT 文档与博客" class="md-nav__button md-logo" aria-label="ZJUSCT 文档与博客" data-md-component="logo">
      
  <img src="../../../assets/zjusct.svg" alt="logo">

    </a>
    ZJUSCT 文档与博客
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ZJUSCT/docs.zjusct.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    docs.zjusct.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    首页
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            首页
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index/contribute/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    贡献
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index/history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZJUSCT 历史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index/newcomer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZJUSCT 集群新手指南
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../competition/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    🏆 竞赛
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            🏆 竞赛
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../falcon/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    🦅 Falcon
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            🦅 Falcon
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../falcon/git/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZJU Git 代码托管服务
    
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../falcon/mirror-history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZJU Mirror 历史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../falcon/mirror/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZJU Mirror 镜像站
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../optimization/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    🔧 优化
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            🔧 优化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../optimization/parallel/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    parallel
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            parallel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    cpu
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            cpu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../optimization/parallel/cpu/model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../optimization/parallel/cpu/mpi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MPI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../optimization/parallel/cpu/openmp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenMP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../optimization/parallel/cpu/others/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    其他
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2_3" >
        
          
          <label class="md-nav__link" for="__nav_4_2_3" id="__nav_4_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    gpu
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_3">
            <span class="md-nav__icon md-icon"></span>
            gpu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../optimization/parallel/gpu/cuda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../optimization/parallel/gpu/hip/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HIP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../optimization/parallel/gpu/model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../optimization/parallel/gpu/others/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Others
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    ⚙️ 运维
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            ⚙️ 运维
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../hardware/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    hardware
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_2" id="__nav_5_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            hardware
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/knowledge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    硬件知识
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/oobm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    带外管理
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    network
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3" id="__nav_5_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            network
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    RDMA
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    RDMA
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rdma-概述" class="md-nav__link">
    <span class="md-ellipsis">
      RDMA 概述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RDMA 概述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rdma-技术" class="md-nav__link">
    <span class="md-ellipsis">
      RDMA 技术
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infiniband-概述" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand 概述
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infiniband-硬件" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand 硬件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="InfiniBand 硬件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#host-channel-adapter" class="md-nav__link">
    <span class="md-ellipsis">
      Host Channel Adapter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#线缆" class="md-nav__link">
    <span class="md-ellipsis">
      线缆
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#交换机" class="md-nav__link">
    <span class="md-ellipsis">
      交换机
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infiniband-协议栈" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand 协议栈
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infiniband-内核子系统-linuxdriversinfiniband" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand 内核子系统 linux/drivers/infiniband
    </span>
  </a>
  
    <nav class="md-nav" aria-label="InfiniBand 内核子系统 linux/drivers/infiniband">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#硬件驱动-hw" class="md-nav__link">
    <span class="md-ellipsis">
      硬件驱动 hw
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#软件驱动-sw" class="md-nav__link">
    <span class="md-ellipsis">
      软件驱动 sw
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#上层协议-ulp" class="md-nav__link">
    <span class="md-ellipsis">
      上层协议 ulp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#核心模块-core" class="md-nav__link">
    <span class="md-ellipsis">
      核心模块 core
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infiniband-用户空间库" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand 用户空间库
    </span>
  </a>
  
    <nav class="md-nav" aria-label="InfiniBand 用户空间库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-infiniband-软件结构" class="md-nav__link">
    <span class="md-ellipsis">
      Linux InfiniBand 软件结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rdma-verb" class="md-nav__link">
    <span class="md-ellipsis">
      RDMA Verb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infiniband-verb" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand Verb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipoib" class="md-nav__link">
    <span class="md-ellipsis">
      IPoIB
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nfs-over-rdma" class="md-nav__link">
    <span class="md-ellipsis">
      NFS over RDMA
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infiniband-运维" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand 运维
    </span>
  </a>
  
    <nav class="md-nav" aria-label="InfiniBand 运维">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensm" class="md-nav__link">
    <span class="md-ellipsis">
      OpenSM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mlnx_ofed" class="md-nav__link">
    <span class="md-ellipsis">
      MLNX_OFED
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perftest" class="md-nav__link">
    <span class="md-ellipsis">
      perftest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mstflint" class="md-nav__link">
    <span class="md-ellipsis">
      mstflint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hca-卡" class="md-nav__link">
    <span class="md-ellipsis">
      HCA 卡
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dhcp-for-ipoib" class="md-nav__link">
    <span class="md-ellipsis">
      DHCP for IPoIB
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benchmark" class="md-nav__link">
    <span class="md-ellipsis">
      Benchmark
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#其他" class="md-nav__link">
    <span class="md-ellipsis">
      其他
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3_3" id="__nav_5_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    network-technology
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_3">
            <span class="md-nav__icon md-icon"></span>
            network-technology
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network-technology/ipv6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IPv6
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network-technology/l2tp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    L2TP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network-technology/lag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    链路聚合
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network-technology/lldp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLDP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network-technology/snmp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SNMP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network-technology/vlan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VLAN
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network-technology/wlan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WLAN
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../observability/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    observability
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_4" id="__nav_5_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            observability
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../observability/log/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    日志收集
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../observability/network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网络观测
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../observability/opentelemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数据采集：OpenTelemetry
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    software
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_5" id="__nav_5_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            software
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    编译/构建系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/conda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    包管理器：Conda
    
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/lmod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    环境管理：Lmod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/modern-cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    现代化 CLI 工具
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/shell/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    环境变量与 Shell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/spack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    包管理器：Spack
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../system/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    system
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_6" id="__nav_5_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            system
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/macOS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    macOS 运维
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6_3" >
        
          
          <label class="md-nav__link" for="__nav_5_6_3" id="__nav_5_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    basic
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6_3">
            <span class="md-nav__icon md-icon"></span>
            basic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/basic/acl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    文件权限
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/basic/boot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    启动过程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/basic/drivers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux 设备驱动
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/basic/filesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    文件系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/basic/systemd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    systemd
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../system/diskless/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    diskless
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_6_4" id="__nav_5_6_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6_4">
            <span class="md-nav__icon md-icon"></span>
            diskless
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/diskless/cicd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    自动构建：Jenkins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/diskless/distros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    其他发行版
    
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/diskless/nfsroot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    核心机制：NFS Root
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/diskless/pxe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    引导方式：PXE
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6_5" >
        
          
          <label class="md-nav__link" for="__nav_5_6_5" id="__nav_5_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6_5">
            <span class="md-nav__icon md-icon"></span>
            service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/service/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    身份认证与授权：NSS、PAM 和 SSSD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/service/containers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    容器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/service/jenkins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CI/CD 平台：Jenkins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/service/ldap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    目录服务：LDAP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/service/nis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网络信息服务：NIS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/service/pve/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    虚拟化平台：PVE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/service/slurm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    任务调度：Slurm
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../blog/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    ✍️ 博客
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            ✍️ 博客
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    posts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            posts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/posts/.template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    None
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2_2" id="__nav_6_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    2018
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_2">
            <span class="md-nav__icon md-icon"></span>
            2018
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2018/09/30/%E6%B5%99%E6%B1%9F%E5%A4%A7%E5%AD%A6%E8%B6%85%E7%AE%97%E9%98%9F%E5%8D%9A%E5%AE%A2%E6%B4%BB%E4%BA%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    浙江大学超算队博客...活了？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2018/11/25/cuda-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%80%BB%E7%BB%93-%E4%B8%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA 内存管理总结 (一)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2018/12/07/quick-guide-to-cuda-profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Guide to CUDA Profiling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2018/12/23/distributed-tensorflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributed Tensorflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2018/12/24/bp-%E7%AE%97%E6%B3%95feed-forward-neural-network-and-back-propagation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    （BP 算法）Feed forward neural network and back propagation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2_3" >
        
          
          <label class="md-nav__link" for="__nav_6_2_3" id="__nav_6_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    2019
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_3">
            <span class="md-nav__icon md-icon"></span>
            2019
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2019/03/31/%E5%A6%82%E4%BD%95%E5%9C%A8%E5%A2%99%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2-centos-7-%E7%9A%84-mysql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    如何在墙内快速部署 CentOS 7 的 MySQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2019/03/31/virtual-memory-and-tlb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual Memory and TLB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2019/05/11/%E5%9F%BA%E4%BA%8E-0-1-%E4%B9%98%E6%80%A7%E5%99%AA%E5%A3%B0%E7%9A%84%E6%9C%B4%E7%B4%A0%E5%9B%BE%E7%89%87%E9%99%8D%E5%99%AA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基于 0-1 乘性噪声的朴素图片降噪
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2019/05/27/20190526-%E4%BC%9A%E8%AE%AE%E8%AE%B0%E5%BD%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2019.05.26 会议记录
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2019/05/31/%E7%94%9F%E6%88%90%E5%BC%8F%E5%AF%B9%E6%8A%97%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    生成式对抗网络——基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2019/06/14/%E7%94%9F%E6%88%90%E5%BC%8F%E5%AF%B9%E6%8A%97%E7%BD%91%E7%BB%9C%E7%90%86%E8%AE%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    生成式对抗网络——理论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2019/06/16/%E5%9F%BA%E4%BA%8E-gan-%E7%9A%84%E5%8A%A8%E6%BC%AB%E5%A4%B4%E5%83%8F%E7%94%9F%E6%88%90/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基于 GAN 的动漫头像生成
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2019/06/21/rsa-%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E5%8F%8A%E5%85%B6%E6%95%B0%E5%AD%A6%E6%80%9D%E6%83%B3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RSA 加密算法及其数学思想
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2_4" >
        
          
          <label class="md-nav__link" for="__nav_6_2_4" id="__nav_6_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_4">
            <span class="md-nav__icon md-icon"></span>
            2025
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2025/03/16/%E8%A0%95%E8%99%AB%E7%97%85%E6%AF%92%E5%85%A5%E4%BE%B5%E4%BA%8B%E4%BB%B6%E5%A7%8B%E6%9C%AB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    蠕虫病毒入侵事件始末
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2025/05/01/%E7%AC%AC%E4%B8%89%E4%BB%A3%E9%95%9C%E5%83%8F%E7%AB%99%E5%BB%BA%E8%AE%BE%E4%B8%80%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第三代镜像站建设（一）：服务器自动化部署
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/2025/05/19/-hello-hpc-world--2025-%E8%B6%85%E7%AE%97%E7%9F%AD%E5%AD%A6%E6%9C%9F%E8%AF%BE%E7%A8%8B%E6%AD%A3%E5%BC%8F%E5%90%AF%E5%8A%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🎓 Hello, HPC World | 2025 超算短学期课程正式启动！
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/archive/2019/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2019
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/archive/2018/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2018
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/cuda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/centos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CentOS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/ml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/meetingreport/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MeetingReport
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/mysql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MySQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/operating-susyem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operating Susyem
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Profile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/spc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/tlb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TLB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/tech/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tech
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/tensorflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tensorflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/virtual-memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual Memory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/zju/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZJU
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/zjusct/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZJUSCT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/%E5%AF%86%E7%A0%81%E5%AD%A6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    密码学
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/%E6%95%B0%E8%AE%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/%E7%9F%AD%E5%AD%A6%E6%9C%9F%E8%AF%BE%E7%A8%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    短学期课程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/%E8%BF%90%E7%BB%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    运维
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rdma-概述" class="md-nav__link">
    <span class="md-ellipsis">
      RDMA 概述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RDMA 概述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rdma-技术" class="md-nav__link">
    <span class="md-ellipsis">
      RDMA 技术
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infiniband-概述" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand 概述
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infiniband-硬件" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand 硬件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="InfiniBand 硬件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#host-channel-adapter" class="md-nav__link">
    <span class="md-ellipsis">
      Host Channel Adapter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#线缆" class="md-nav__link">
    <span class="md-ellipsis">
      线缆
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#交换机" class="md-nav__link">
    <span class="md-ellipsis">
      交换机
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infiniband-协议栈" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand 协议栈
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infiniband-内核子系统-linuxdriversinfiniband" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand 内核子系统 linux/drivers/infiniband
    </span>
  </a>
  
    <nav class="md-nav" aria-label="InfiniBand 内核子系统 linux/drivers/infiniband">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#硬件驱动-hw" class="md-nav__link">
    <span class="md-ellipsis">
      硬件驱动 hw
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#软件驱动-sw" class="md-nav__link">
    <span class="md-ellipsis">
      软件驱动 sw
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#上层协议-ulp" class="md-nav__link">
    <span class="md-ellipsis">
      上层协议 ulp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#核心模块-core" class="md-nav__link">
    <span class="md-ellipsis">
      核心模块 core
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infiniband-用户空间库" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand 用户空间库
    </span>
  </a>
  
    <nav class="md-nav" aria-label="InfiniBand 用户空间库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-infiniband-软件结构" class="md-nav__link">
    <span class="md-ellipsis">
      Linux InfiniBand 软件结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rdma-verb" class="md-nav__link">
    <span class="md-ellipsis">
      RDMA Verb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infiniband-verb" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand Verb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipoib" class="md-nav__link">
    <span class="md-ellipsis">
      IPoIB
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nfs-over-rdma" class="md-nav__link">
    <span class="md-ellipsis">
      NFS over RDMA
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infiniband-运维" class="md-nav__link">
    <span class="md-ellipsis">
      InfiniBand 运维
    </span>
  </a>
  
    <nav class="md-nav" aria-label="InfiniBand 运维">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensm" class="md-nav__link">
    <span class="md-ellipsis">
      OpenSM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mlnx_ofed" class="md-nav__link">
    <span class="md-ellipsis">
      MLNX_OFED
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perftest" class="md-nav__link">
    <span class="md-ellipsis">
      perftest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mstflint" class="md-nav__link">
    <span class="md-ellipsis">
      mstflint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hca-卡" class="md-nav__link">
    <span class="md-ellipsis">
      HCA 卡
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dhcp-for-ipoib" class="md-nav__link">
    <span class="md-ellipsis">
      DHCP for IPoIB
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benchmark" class="md-nav__link">
    <span class="md-ellipsis">
      Benchmark
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#其他" class="md-nav__link">
    <span class="md-ellipsis">
      其他
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <nav class="md-tags" >
    
      
      
      
        <a href="../../../index/contribute/#tag:draft" class="md-tag">draft</a>
      
    
  </nav>


  
    <a href="https://github.com/ZJUSCT/docs.zjusct.io/blob/main/docs/operation/network/rdma.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="rdma">RDMA<a class="headerlink" href="#rdma" title="Permanent link">&para;</a></h1>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/164908617">0. 《RDMA 杂谈》专栏索引 - 知乎</a>：写得很好的 RDMA 入门文章。有些遗憾的是发现得太晚了，找到时这篇文档也已经写了很多了。</li>
</ul>
</div>
<h2 id="rdma-概述">RDMA 概述<a class="headerlink" href="#rdma-概述" title="Permanent link">&para;</a></h2>
<h3 id="rdma-技术">RDMA 技术<a class="headerlink" href="#rdma-技术" title="Permanent link">&para;</a></h3>
<p>RDMA 仅仅是一种机制，考虑其具体实现，就涉及到多种技术。现有的 RDMA 技术包括 RoCE（RDMA over Converged Ethernet）、InfiniBand、iWARP 等。</p>
<figure>
    <a class="glightbox" href="../rdma.assets/rdma_arch_compare.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img align="center" alt="rdma_arch_compare" src="../rdma.assets/rdma_arch_compare.png" width="80%" /></a>
    <figcaption>
    RDMA 技术架构比较
    <br /><small>
    <a href="https://cloud.tencent.com/developer/article/1771431">浅析 RoCE 网络技术 - 腾讯云</a>
</small></figcaption></figure>
<ul>
<li><strong>InfiniBand</strong>：专为 RDMA 设计的网络技术，从硬件级别保证可靠传输。<strong>需要专门的网络适配器、交换机。</strong></li>
<li><strong>RoCE 和 iWARP</strong>：都是基于以太网的 RDMA 技术，RoCE 使用 UDP 协议，iWARP 使用 TCP 协议。<ul>
<li><strong>Soft RoCE</strong>：可以以 Soft RoCE 的方式（使用 <a href="https://github.com/SoftRoCE/librxe-dev"><code>rxe</code> 驱动</a>）运行在普通以太网上，但在带宽和延迟上都和普通以太网没什么差别（见 <a href="https://www.ijcsit.com/docs/Volume%205/vol5issue01/ijcsit2014050168.pdf">Comparing Ethernet and soft Roce over 1 gigabit ethernet using osu benchmark - IJCSIT</a>）。</li>
<li><strong>聚合以太网（Converged Ethernet）</strong>：真正的 RoCE 就和它全名描述的一样，需要交换机和网络适配器支持聚合以太网。这是由 IEEE DCB 工作组提出的一组增强标准（比如 802.Qbb 流控、802.Qaz 传输选择、802.Qau 拥塞控制等）组成的，有两大目的：<ol>
<li>将存储、通信、计算等流量（如 iSCSI、FCoE、RDMA）<strong>整合</strong>到一套共享的以太网基础设施上，这就是“聚合”的意思。</li>
<li>支持<strong>不丢包</strong>传输，从而支持对传输可靠性要求极高的服务（比如 RDMA）。</li>
</ol>
</li>
</ul>
</li>
<li>其他专有技术：如 Intel 的 Omni-Path。</li>
</ul>
<h2 id="infiniband-概述">InfiniBand 概述<a class="headerlink" href="#infiniband-概述" title="Permanent link">&para;</a></h2>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<ul>
<li><a href="https://wiki.debian.org/RDMA">RDMA - Debian Wiki</a></li>
<li><a href="https://www.openfabrics.org/ofed-for-linux/">OFED for Linux – OpenFabrics Alliance</a></li>
<li><a href="https://mug.mvapich.cse.ohio-state.edu/static/media/mug/presentations/19/shainer-mug-19.pdf">InfiniBand In-Network Computing Technology and Roadmap - Mellanox</a></li>
</ul>
</div>
<p>下面两张图是 InfiniBand 技术栈。可以看到 InfiniBand 是一套系统的解决方案，包含网络适配器、交换机、SoC、线缆和软件生态。</p>
<figure>
    <a class="glightbox" href="../rdma.assets/ib_tech_roadmap_2015.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="ib_tech_roadmap_2015" src="../rdma.assets/ib_tech_roadmap_2015.png" style="float: left" width="50%" /></a>
    <a class="glightbox" href="../rdma.assets/ib_tech_roadmap_2019.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="ib_tech_roadmap_2019" src="../rdma.assets/ib_tech_roadmap_2019.png" width="50%" /></a>
</figure>
<center><figcaption>
    InfiniBand 技术路线
    <br />左 2015 年，右 2019 年
<br /><small>
    [Mellanox Touts Arrival of Intelligent Interconnect - HPC Wire](https://www.hpcwire.com/2015/11/16/mellanox-touts-arrival-of-intelligent-interconnect/)<br />
    [InfiniBand In-Network Computing Technology and Roadmap - MVAPICH](https://mug.mvapich.cse.ohio-state.edu/static/media/mug/presentations/19/shainer-mug-19.pdf)
</small></figcaption></center>

<ul>
<li><strong>提供商</strong>：NVIDIA Mellanox 仅此一家。</li>
<li>
<p><strong>内核支持情况</strong>：</p>
<ul>
<li><strong>子系统</strong>：Linux 内核将 InfiniBand 作为一个驱动子系统提供支持，见 <a href="https://docs.kernel.org/driver-api/infiniband.html">InfiniBand and Remote DMA (RDMA) Interfaces — The Linux Kernel documentation</a>。</li>
<li>
<p><strong>用户空间</strong>：只有内核接口是不够的，还需要用户空间的库和工具。内核团队维护了一套用户空间库和工具，见 <a href="https://github.com/linux-rdma/rdma-core"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></span> linux-rdma/rdma-core: RDMA core userspace libraries and daemons</a>。</p>
<p>它提供了两个重要的库（包含 C/C++ 和 Python 绑定），大多数 RDMA 应用都基于它们开发：</p>
<ul>
<li><code>librdmacm</code>：使用 IP 寻址建立连接，比 <code>libibverbs</code> 抽象程度更高，对于写过 socket 程序的人来说更容易上手。</li>
<li><code>libibverbs</code>：提供其他控制和数据通路操作，实现 InfiniBand Trade Association（IBTA）定义的抽象接口。</li>
</ul>
<p><figure markdown="span">
    <a class="glightbox" href="../rdma.assets/rdma_core.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img align="center" alt="rdma_core" src="../rdma.assets/rdma_core.png" width="50%" /></a>
    <figcaption>
    RDMA 栈
    <br /><small>
    <a href="https://netdevconf.info/0x16/slides/40/RDMA%20Tutorial.pdf">RDMA Tutorial - Netdev</a>
</small></figcaption></figure></p>
</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>这也就是说 Linux 不安装厂商的驱动也可以使用 InfiniBand。比如 NVIDIA 停止了 ConnectX-3 在 Debian 10 之后的版本的支持，但用内核中的 rdma-core 等仍然可以使用。通过 rdma-core，我们在 Debian 12 中成功使用了 ConnectX-3 卡。</p>
</div>
</li>
<li>
<p><strong>产商支持</strong>：</p>
<ul>
<li><strong><a href="https://www.openfabrics.org/ofa-overview/">OpenFabrics</a></strong>：OFA 联盟负责开发、测试、许可、支持和分发 RDMA/先进网络软件，目标是促进先进网络架构的发展与普及。成员包括 Mellanox、HUAWEI、Intel、IBM、Red Hat、Microsoft 等厂商和 SNIA 等标准组织。OpenFabrics 曾经是 OpenIB Alliance，但后来扩展支持了 iWARP、RoCE 等。</li>
<li><strong><a href="https://www.openfabrics.org/ofed-for-linux/">OpenFabrics Enterprise Distribution（OFED）</a></strong>：产商们从 linux-rdma 拉取源代码，针对自己的产品进行优化、修改、打补丁等。非常重要的是它提供了<strong>内核旁路（kernel bypass）</strong>功能，一些应用程序可以直接访问硬件资源，极大提高性能。此外，适配器和线缆等的<strong>固件更新</strong>也需要产商的工具。</li>
</ul>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>我们在测试 MPI 应用时发现，btop 可以观测到 OpenMPI 的流量，但是却观测不到 IntelMPI 的流量。我们猜测这可能是因为 IntelMPI 利用了 OFED 的内核旁路功能。这需要进一步验证。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>MLNX_OFED 已经停止支持，将转移到 DOCA-OFED。</p>
</div>
</li>
</ul>
<h2 id="infiniband-硬件">InfiniBand 硬件<a class="headerlink" href="#infiniband-硬件" title="Permanent link">&para;</a></h2>
<p>本节结合我们有的硬件简单讲讲，认识一下 InfiniBand 硬件。</p>
<p>InfiniBand 标准中定义的硬件组成部分有：</p>
<ul>
<li><strong>Host Channel Adapter（HCA）</strong>：可以理解为网络适配器。</li>
<li><strong>Target Channel Adapter（TCA）</strong>：可以理解为嵌入式系统的网络适配器。</li>
<li><strong>Switch</strong>：实现了 InfiniBand 链路层流控的交换机，能够不丢包传输。</li>
<li><strong>Router</strong>：用于大型网络。IB 管理架构以子网为单位，通过路由器分隔子网能够减少管理流量在整个网络中的传输。</li>
<li><strong>Cable and Connector</strong>：</li>
</ul>
<h3 id="host-channel-adapter">Host Channel Adapter<a class="headerlink" href="#host-channel-adapter" title="Permanent link">&para;</a></h3>
<p>网络适配器</p>
<p>NVIDIA Mellanox 制造的网络适配器系列名称为 ConnectX。这些网络适配器一般支持 InfiniBand 或 RoCE 模式，可灵活配置。</p>
<table>
<thead>
<tr>
<th style="text-align: left;"><strong>Feature</strong></th>
<th style="text-align: left;"><strong>ConnectX-3</strong></th>
<th style="text-align: left;"><strong>ConnectX-4</strong></th>
<th style="text-align: left;"><strong>ConnectX-5</strong></th>
<th style="text-align: left;"><strong>ConnectX-6</strong></th>
<th style="text-align: left;"><strong>ConnectX-7</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Speed</td>
<td style="text-align: left;">56Gb/s</td>
<td style="text-align: left;">100Gb/s</td>
<td style="text-align: left;">100Gb/s</td>
<td style="text-align: left;">200Gb/s</td>
<td style="text-align: left;">400Gb/s</td>
</tr>
<tr>
<td style="text-align: left;">Connector</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">QSFP28</td>
<td style="text-align: left;">QSFP56</td>
<td style="text-align: left;">OSFP, QSFP112</td>
</tr>
<tr>
<td style="text-align: left;">PCIe</td>
<td style="text-align: left;">x8 Gen3</td>
<td style="text-align: left;">x8, x16 Gen3</td>
<td style="text-align: left;">Gen3/4 x16</td>
<td style="text-align: left;">Gen3/4 x16</td>
<td style="text-align: left;">Gen4/5 x16</td>
</tr>
<tr>
<td style="text-align: left;">IB RDMA / RoCE</td>
<td style="text-align: left;">IB RDMA, RoCE*</td>
<td style="text-align: left;">IB RDMA, RoCE</td>
<td style="text-align: left;">IB RDMA, RoCE</td>
<td style="text-align: left;">IB RDMA, RoCE</td>
<td style="text-align: left;">IB RDMA, RoCE</td>
</tr>
<tr>
<td style="text-align: left;">SR-IOV</td>
<td style="text-align: left;">Supported</td>
<td style="text-align: left;">Supported</td>
<td style="text-align: left;">Supported</td>
<td style="text-align: left;">Supported</td>
<td style="text-align: left;">Supported</td>
</tr>
</tbody>
</table>
<p><small>这张表来自 <a href="https://enterprise-support.nvidia.com/s/article/mellanox-adapters---comparison-table">Mellanox Adapters - Comparison Table</a> 以及 <a href="https://nvdam.widen.net/s/cprk9mhfzq/networking-datasheet-infiniband-adapter-cards---web--1549706">Networking-datasheet-InfiniBand-Adapter-Cards---web--1549706.pdf (widen.net)</a>。</small></p>
<p>NVIDIA 是 InfiniBand 技术的唯一供应商，目前其他厂家最多只能制造 IB 线缆。而 RoCE 技术则有众多 ICT 厂商支持，如 Cisco、华为、Juniper 等。</p>
<h3 id="线缆">线缆<a class="headerlink" href="#线缆" title="Permanent link">&para;</a></h3>
<p>InfiniBand 线缆端子上有 EEPROM 芯片，可以存储线缆的信息，如长度、型号、序列号等。</p>
<h3 id="交换机">交换机<a class="headerlink" href="#交换机" title="Permanent link">&para;</a></h3>
<h2 id="infiniband-协议栈">InfiniBand 协议栈<a class="headerlink" href="#infiniband-协议栈" title="Permanent link">&para;</a></h2>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<ul>
<li>Presentation:<ul>
<li><a href="https://www.snia.org/sites/default/files/files2/files2/SDC2013/presentations/Hardware/DavidDeming_Infiniband_Architectural_Overview.pdf">(2013)InfiniBand Architecture Overview - SNIA</a></li>
<li><a href="https://www.snia.org/sites/default/education/tutorials/2008/spring/networking/Goldenberg-D_InfiniBand_Technology_Overview.pdf">(2008)InfiniBand Technology Overview - SNIA</a></li>
</ul>
</li>
<li>White Paper:<ul>
<li><a href="https://network.nvidia.com/pdf/whitepapers/IB_Intro_WP_190.pdf">(2003)Introduction to InfiniBand™ - NVIDIA</a></li>
<li><a href="https://network.nvidia.com/pdf/whitepapers/Intro_to_IB_for_End_Users.pdf">(2010)Introduction to InfiniBand™ for End Users - NVIDIA</a></li>
</ul>
</li>
<li>Specification: <a href="https://www.afs.enea.it/asantoro/V1r1_2_1.Release_12062007.pdf">(2007)InfiniBand Architecture Release 1.2.1 - ENEA</a></li>
</ul>
</div>
<p>让我们忽略负责路由的网络层及更低层次，从 Transport Layer 开始。在传输层中，InfiniBand 双端建立消息队列（Queue Pair）进行通信。定义以下 Transport Functions：SEND、RDMA Write、RDMA Read、ATOMIC、Memory Binding。这些操作在不同服务等级（Transport Service Level）中的可用性不同。</p>
<p>SM：子网管理器。The InfiniBand Subnet Manager (SM) is a centralized entity running in the switch. The SM discovers and configures all the InfiniBand fabric devices to enable traffic flow between those devices. 每个 IB 网络中都需要一个 SM，否则 ibstat 一直会处于 Initializing 的状态。在 Switchless IB Network 中，其中的一台机器应当启动 OpenSM（在 LInux Kernel 中，一般发行版都会带）。用 sudo 启动 opensm，或者用 systemctl 启动 opensmd.service 即可。</p>
<p>The installation of OpenSM includes:
sbin/
   opensm - the SM/SA executable
   osmtest - a test program for the SM/SA
lib/
   libosmcomp.{a,so} - component library with generic services and containers
   libopensm.{a,so} - opensm services for logs and mad buffer pool
   libosmvendor.{a,so} - interface to the user mad service of the driver
include/
   iba/ib_types.h - IBA types header file
   complib/ - component library includes
   vendor/  - vendor library includes
   opensm/  - public opensm library includes</p>
<h2 id="infiniband-内核子系统-linuxdriversinfiniband">InfiniBand 内核子系统 <code>linux/drivers/infiniband</code><a class="headerlink" href="#infiniband-内核子系统-linuxdriversinfiniband" title="Permanent link">&para;</a></h2>
<p>阅读 <a href="https://github.com/torvalds/linux/blob/master/drivers/infiniband"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></span> linux/drivers/infiniband</a>。</p>
<h3 id="硬件驱动-hw">硬件驱动 <code>hw</code><a class="headerlink" href="#硬件驱动-hw" title="Permanent link">&para;</a></h3>
<p>你可以在 <code>hw</code> 下看到这里不仅有 InfiniBand 驱动，还有 RoCE 和 iWARP 等驱动。代码注释、内核模块的 Description 中会说明这是哪个厂商的驱动。下面举一些常见的例子：</p>
<ul>
<li>InfiniBand<ul>
<li><code>mlx4</code>: Mellanox ConnectX HCA InfiniBand driver</li>
<li><code>mlx5</code>: Mellanox 5th generation network adapters (ConnectX series) IB driver</li>
<li><code>mthca</code>: Mellanox InfiniBand HCA low-level driver</li>
</ul>
</li>
<li>RoCE<ul>
<li><code>erdma</code>：来自阿里巴巴</li>
<li><code>hns</code>：来自华为海思</li>
<li><code>irdma</code>: <a href="https://downloadmirror.intel.com/738730/README_irdma.txt">Linux* RDMA Driver for the E800 Series and X722 Intel(R) Ethernet Controllers</a></li>
</ul>
</li>
<li>iWARP<ul>
<li><code>cxgb3</code></li>
</ul>
</li>
</ul>
<p>此外你可能在远古文档中看见过 <code>amso</code>、<code>ipath</code> 等驱动。它们已经因为停止维护而被移出内核源码树。</p>
<p><code>mthca</code> 用于远古的 InfiniHost 系列产品。<a href="https://docs.nvidia.com/networking/display/ofedv502180/introduction">MLNX_OFED 文档</a> 详细解释了 <code>mlx4</code> 和 <code>mlx5</code> 这两个驱动。下图展示了这些驱动模块工作的位置。</p>
<figure>
<p><a class="glightbox" href="../rdma.assets/mlx4_mlx5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="mlx4_mlx5" src="../rdma.assets/mlx4_mlx5.png" /></a></p>
<figcaption>Mellanox ConnectX 驱动<br />
<small>
<a href="https://docs.nvidia.com/networking/display/ofedv502180/introduction">Mellanox OFED User Manual</a>
</small>
</figcaption>
</figure>
<ul>
<li>CX-3 和 CX-3 Pro 对应 <code>mlx4</code>，其后的产品对应 <code>mlx5</code>。</li>
<li>CX-3 既可以工作在 InfiniBand 模式，也可以工作在 Ethernet 模式。因此 <code>mlx4</code> 分为几个模块：<ul>
<li><code>mlx4_core</code></li>
<li><code>mlx4_ib</code></li>
<li><code>mlx4_en</code>，位于 <code>drivers/net/ethernet/mellanox/mlx4</code>。</li>
</ul>
</li>
<li>其后的产品也可以工作在 InfiniBand 和 Ethernet 模式，但以太网功能被合并到 <code>core</code> 中，因此不需要 <code>mlx5_en</code>（虽然这个驱动确实存在于 <code>drivers/net/ethernet/mellanox/mlx5</code> 中）：<ul>
<li><code>mlx5_core</code></li>
<li><code>mlx5_ib</code></li>
</ul>
</li>
</ul>
<p>MLNX_OFED 文档中还有驱动的参数等，可以参考。</p>
<h3 id="软件驱动-sw">软件驱动 <code>sw</code><a class="headerlink" href="#软件驱动-sw" title="Permanent link">&para;</a></h3>
<ul>
<li><code>rxe</code>：软件实现的 RoCE。</li>
<li><code>siw</code>：Soft iWARP，软件实现的 iWARP。</li>
<li>
<p><code>rdmavt</code>：RDMA Verbs Transport Library。用于统一硬件驱动的一层，示意图如下：</p>
<p><figure markdown="1">
    <a class="glightbox" href="../rdma.assets/rdmavt.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="rdmavt" src="../rdma.assets/rdmavt.png" /></a>
    <figcaption>
    RDMA Verbs Transport Library
    <br /><small>
    <a href="https://www.openfabrics.org/images/eventpresos/2016presentations/203SoftwareVerbs.pdf">Creating a Common Software Verbs Implementation - OpenFabrics Alliance</a>
</small></figcaption></figure></p>
<p>举一个具体的作用：<code>rdmavt</code> 代表驱动调用 <code>ib_register_device()</code> 注册设备。</p>
<p>详细解释见 <a href="https://www.openfabrics.org/images/eventpresos/2016presentations/203SoftwareVerbs.pdf">Creating a Common Software Verbs Implementation - OpenFabrics Alliance</a>。</p>
</li>
</ul>
<h3 id="上层协议-ulp">上层协议 <code>ulp</code><a class="headerlink" href="#上层协议-ulp" title="Permanent link">&para;</a></h3>
<p>在前文 <a href="#infiniband-协议栈">InfiniBand 协议栈</a> 中，我们已经介绍了 Upper Layer Protocols 用于将 InfiniBand 连接到常用的接口。在 <code>ulp</code> 中，我们可以看到这些协议的具体实现。其中值得探究的有：</p>
<ul>
<li><code>ipoib</code></li>
</ul>
<p>NFS over RDMA 虽然也是一个 ULP，但它似乎实现在 IPoIB 上，因此不出现在这里。</p>
<h3 id="核心模块-core">核心模块 <code>core</code><a class="headerlink" href="#核心模块-core" title="Permanent link">&para;</a></h3>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<ul>
<li><a href="https://docs.kernel.org/driver-api/infiniband.html">InfiniBand and Remote DMA (RDMA) Interfaces — The Linux Kernel documentation</a></li>
</ul>
</div>
<p>TODO</p>
<h2 id="infiniband-用户空间库">InfiniBand 用户空间库<a class="headerlink" href="#infiniband-用户空间库" title="Permanent link">&para;</a></h2>
<p>阅读 <a href="https://github.com/linux-rdma/rdma-core"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></span> linux-rdma/rdma-core</a> 的简介。</p>
<h3 id="linux-infiniband-软件结构">Linux InfiniBand 软件结构<a class="headerlink" href="#linux-infiniband-软件结构" title="Permanent link">&para;</a></h3>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<ul>
<li><a href="https://docs.kernel.org/infiniband/index.html">InfiniBand - The Linux Kernel</a></li>
<li><a href="https://docs.oracle.com/cd/E19932-01/820-3523-10/ea_chpt3_software_overview.html">InfiniBand Software on Linux - Oracle</a></li>
<li><a href="https://docs.nvidia.com/cuda/archive/11.3.0/pdf/GPUDirect_RDMA.pdf">Developing a Linux Kernel module using RDMA for GPUDirect - NVIDIA</a></li>
</ul>
</div>
<p>Linux 内核中的 InifiniBand 可以分为三个层次：</p>
<ul>
<li>HCA Driver</li>
<li>Core InfiniBand Modules</li>
<li>Upper Level Protocols</li>
</ul>
<h3 id="rdma-verb">RDMA Verb<a class="headerlink" href="#rdma-verb" title="Permanent link">&para;</a></h3>
<h3 id="infiniband-verb">InfiniBand Verb<a class="headerlink" href="#infiniband-verb" title="Permanent link">&para;</a></h3>
<h3 id="ipoib">IPoIB<a class="headerlink" href="#ipoib" title="Permanent link">&para;</a></h3>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<ul>
<li><a href="https://datatracker.ietf.org/doc/html/rfc4391">Transmission of IP over InfiniBand (IPoIB) - RFC 4391</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc4392">IP over InfiniBand (IPoIB) Architecture - RFC 4392</a></li>
<li><a href="https://docs.kernel.org/infiniband/ipoib.html">IP over InfiniBand - The Linux Kernel</a></li>
</ul>
</div>
<p>Linux 内核提供 <code>ib_ipoib</code> 驱动。</p>
<h3 id="nfs-over-rdma">NFS over RDMA<a class="headerlink" href="#nfs-over-rdma" title="Permanent link">&para;</a></h3>
<h2 id="infiniband-运维">InfiniBand 运维<a class="headerlink" href="#infiniband-运维" title="Permanent link">&para;</a></h2>
<h3 id="opensm">OpenSM<a class="headerlink" href="#opensm" title="Permanent link">&para;</a></h3>
<p>IB 管理交换机能够作为 Subnet Manager（SM）来管理 IB 网络。SM 负责发现和配置所有 InfiniBand 设备。</p>
<p>使用非网管 IB 交换机时，IB 网络中缺少 Subnet Manager（SM），此时所有 HCA 状态为 Initializing。可以在其中的一台主机上安装开源的 OpenSM：</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>opensm
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>opensm
</span></code></pre></div>
<h3 id="mlnx_ofed">MLNX_OFED<a class="headerlink" href="#mlnx_ofed" title="Permanent link">&para;</a></h3>
<ul>
<li>MLNX_OFED is an NVIDIA tested and packaged version of OFED that supports two interconnect types using the same RDMA (remote DMA) and kernel bypass APIs called OFED verbs – InfiniBand and Ethernet.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a># 不在 sbin 的
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>ibv_devices # 查看本机 IB 设备
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>ibv_devinfo -d &lt;device&gt;
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a># 查询
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>ibstat
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>ibstatus
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>ibaddr
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>ibnodes
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>ibhosts
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>ibrouters
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>ibswitches
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>iblinkinfo
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>ibnetdiscover
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a># 查询当前 IB 子网管理的位置
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>sminfo
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a># 测试
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>ibping # 注意，需要在另一台机器上使用 ibping -S 作为 server，否则是 ping 不通的。
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>ibping -c &lt;count&gt; -L &lt;lid&gt;
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>ibroute
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>ibtracert
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a># 下面的好像都没啥用
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>ibcacheedit
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>ibccconfig
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>ibccquery
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>ibfindnodesusing
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>ibidsverify
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>ibportstate
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>ibqueryerrors
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>ibsysstat
</span></code></pre></div>
<h3 id="perftest">perftest<a class="headerlink" href="#perftest" title="Permanent link">&para;</a></h3>
<p><code>perftest</code> 包含了一些 RDMA 测试。它依赖于 IP 地址，需要先配置好 IPoIB。</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>ib_send_lat<span class="w">     </span>latency<span class="w"> </span><span class="nb">test</span><span class="w"> </span>with<span class="w"> </span>send<span class="w"> </span>transactions
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>ib_send_bw<span class="w">      </span>bandwidth<span class="w"> </span><span class="nb">test</span><span class="w"> </span>with<span class="w"> </span>send<span class="w"> </span>transactions
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>ib_write_lat<span class="w">    </span>latency<span class="w"> </span><span class="nb">test</span><span class="w"> </span>with<span class="w"> </span>RDMA<span class="w"> </span>write<span class="w"> </span>transactions
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>ib_write_bw<span class="w">     </span>bandwidth<span class="w"> </span><span class="nb">test</span><span class="w"> </span>with<span class="w"> </span>RDMA<span class="w"> </span>write<span class="w"> </span>transactions
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>ib_read_lat<span class="w">     </span>latency<span class="w"> </span><span class="nb">test</span><span class="w"> </span>with<span class="w"> </span>RDMA<span class="w"> </span><span class="nb">read</span><span class="w"> </span>transactions
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>ib_read_bw<span class="w">      </span>bandwidth<span class="w"> </span><span class="nb">test</span><span class="w"> </span>with<span class="w"> </span>RDMA<span class="w"> </span><span class="nb">read</span><span class="w"> </span>transactions
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>ib_atomic_lat<span class="w">   </span>latency<span class="w"> </span><span class="nb">test</span><span class="w"> </span>with<span class="w"> </span>atomic<span class="w"> </span>transactions
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>ib_atomic_bw<span class="w">    </span>bandwidth<span class="w"> </span><span class="nb">test</span><span class="w"> </span>with<span class="w"> </span>atomic<span class="w"> </span>transactions
</span></code></pre></div>
<h3 id="mstflint">mstflint<a class="headerlink" href="#mstflint" title="Permanent link">&para;</a></h3>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<ul>
<li><a href="https://github.com/Mellanox/mstflint"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></span> Mellanox/mstflint: Mstflint - an open source version of MFT (Mellanox Firmware Tools)</a></li>
</ul>
</div>
<p><code>mstflint</code> 是 Mellanox Firmware Flash Interface 的缩写，用于管理 Mellanox 网卡的固件。诸如切换 RoCE 与 InfiniBand 模式、更新固件等比较底层的操作都可以通过这个工具完成。</p>
<p>下面以将端口模式从 ETH(2) 切换到 IB(1) 为例演示命令用法：</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>$<span class="w"> </span>mstconfig<span class="w"> </span>query
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>$<span class="w"> </span>sudo<span class="w"> </span>mstconfig<span class="w"> </span>-d<span class="w"> </span>4b:00.0<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nv">LINK_TYPE_P1</span><span class="o">=</span><span class="m">1</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>Device<span class="w"> </span><span class="c1">#1:</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>----------
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>Device<span class="w"> </span>type:<span class="w">        </span>ConnectX5
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>Name:<span class="w">               </span>MCX555A-ECA_Ax_Bx
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>Description:<span class="w">        </span>ConnectX-5<span class="w"> </span>VPI<span class="w"> </span>adapter<span class="w"> </span>card<span class="p">;</span><span class="w"> </span>EDR<span class="w"> </span>IB<span class="w"> </span><span class="o">(</span>100Gb/s<span class="o">)</span><span class="w"> </span>and<span class="w"> </span>100GbE<span class="p">;</span><span class="w"> </span>single-port<span class="w"> </span>QSFP28<span class="p">;</span><span class="w"> </span>PCIe3.0<span class="w"> </span>x16<span class="p">;</span><span class="w"> </span>tall<span class="w"> </span>bracket<span class="p">;</span><span class="w"> </span>ROHS<span class="w"> </span>R6
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>Device:<span class="w">             </span>4b:00.0
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>Configurations:<span class="w">                                     </span>Next<span class="w"> </span>Boot<span class="w">       </span>New
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">        </span>LINK_TYPE_P1<span class="w">                                </span>ETH<span class="o">(</span><span class="m">2</span><span class="o">)</span><span class="w">               </span>IB<span class="o">(</span><span class="m">1</span><span class="o">)</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w"> </span>Apply<span class="w"> </span>new<span class="w"> </span>Configuration?<span class="w"> </span><span class="o">(</span>y/n<span class="o">)</span><span class="w"> </span><span class="o">[</span>n<span class="o">]</span><span class="w"> </span>:<span class="w"> </span>y
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>Applying...<span class="w"> </span>Done!
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>-I-<span class="w"> </span>Please<span class="w"> </span>reboot<span class="w"> </span>machine<span class="w"> </span>to<span class="w"> </span>load<span class="w"> </span>new<span class="w"> </span>configurations.
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>$<span class="w"> </span>mstfwreset<span class="w"> </span>-d<span class="w"> </span>4b:00.0<span class="w"> </span>-l3<span class="w"> </span>-y<span class="w"> </span>reset
</span></code></pre></div>
<p>其他命令见 mstflint 发布自带的手册。</p>
<details class="info">
<summary>老版本命令留档</summary>
<p>MLNX_OFED 包含了 mstflint，但一般版本较老，与新版 mstflint 命令不兼容。这里仅作为留档记录一下。</p>
<p>新版本相比老版本的变化：</p>
<ul>
<li>不需要执行 <code>mst start</code>，服务自动启动。</li>
<li>命令名称发生变化，比如 <code>mlxconfig</code> 变为 <code>mstconfig</code>。</li>
</ul>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># 查看所有设备</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>mst<span class="w"> </span>status
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="c1"># 线缆</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>mst<span class="w"> </span>cable<span class="w"> </span>add<span class="w"> </span><span class="c1"># 扫描线缆，线缆一般不会自动被添加</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>mlxcables<span class="w"> </span>-d<span class="w"> </span>e3:00.0_cable_0<span class="w"> </span>-q
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="c1"># 链路</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>mlxlink
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="c1"># 配置</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>mlxconfig<span class="w"> </span>-d<span class="w"> </span>&lt;device&gt;<span class="w"> </span>query<span class="w"> </span><span class="c1"># 查询详细信息</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>Device<span class="w"> </span><span class="c1">#1:</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>----------
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>Device<span class="w"> </span>type:<span class="w">    </span>ConnectX5
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>Name:<span class="w">           </span>MCX555A-ECA_Ax_Bx
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>Description:<span class="w">    </span>ConnectX-5<span class="w"> </span>VPI<span class="w"> </span>adapter<span class="w"> </span>card<span class="p">;</span><span class="w"> </span>EDR<span class="w"> </span>IB<span class="w"> </span><span class="o">(</span>100Gb/s<span class="o">)</span><span class="w"> </span>and<span class="w"> </span>100GbE<span class="p">;</span><span class="w"> </span>single-port<span class="w"> </span>QSFP28<span class="p">;</span><span class="w"> </span>PCIe3.0<span class="w"> </span>x16<span class="p">;</span><span class="w"> </span>tall<span class="w"> </span>bracket<span class="p">;</span><span class="w"> </span>ROHS<span class="w"> </span>R6
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>Device:<span class="w">         </span><span class="m">31</span>:00.0
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>Configurations:<span class="w">                                      </span>Next<span class="w"> </span>Boot
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">        </span>MEMIC_BAR_SIZE<span class="w">                              </span><span class="m">0</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w">        </span>MEMIC_SIZE_LIMIT<span class="w">                            </span>_256KB<span class="o">(</span><span class="m">1</span><span class="o">)</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">        </span>HOST_CHAINING_MODE<span class="w">                          </span>DISABLED<span class="o">(</span><span class="m">0</span><span class="o">)</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">        </span>HOST_CHAINING_CACHE_DISABLE<span class="w">                 </span>False<span class="o">(</span><span class="m">0</span><span class="o">)</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w">        </span>HOST_CHAINING_DESCRIPTORS<span class="w">                   </span>Array<span class="o">[</span><span class="m">0</span>..7<span class="o">]</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="w">        </span>HOST_CHAINING_TOTAL_BUFFER_SIZE<span class="w">             </span>Array<span class="o">[</span><span class="m">0</span>..7<span class="o">]</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">        </span>FLEX_PARSER_PROFILE_ENABLE<span class="w">                  </span><span class="m">0</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">        </span>FLEX_IPV4_OVER_VXLAN_PORT<span class="w">                   </span><span class="m">0</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">        </span>ROCE_NEXT_PROTOCOL<span class="w">                          </span><span class="m">254</span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">        </span>ESWITCH_HAIRPIN_DESCRIPTORS<span class="w">                 </span>Array<span class="o">[</span><span class="m">0</span>..7<span class="o">]</span>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="w">        </span>ESWITCH_HAIRPIN_TOT_BUFFER_SIZE<span class="w">             </span>Array<span class="o">[</span><span class="m">0</span>..7<span class="o">]</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w">        </span>PF_BAR2_SIZE<span class="w">                                </span><span class="m">0</span>
</span></code></pre></div>
</details>
<h3 id="hca-卡">HCA 卡<a class="headerlink" href="#hca-卡" title="Permanent link">&para;</a></h3>
<p>使用 <code>ibstat</code> 命令可以查看 HCA 卡的状态。只要能在这里看到 HCA 卡，就说明驱动已经加载。</p>
<p>端口的状态有以下几种：</p>
<table>
<thead>
<tr>
<th>State</th>
<th>Physical State</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Down</td>
<td>Disabled</td>
<td>未连接线缆</td>
</tr>
<tr>
<td>Polling</td>
<td>Polling</td>
<td>如果持续处于该状态说明 IB 子网没有 SM</td>
</tr>
<tr>
<td>Active</td>
<td>LinkUp</td>
<td>连接正常</td>
</tr>
</tbody>
</table>
<h3 id="dhcp-for-ipoib">DHCP for IPoIB<a class="headerlink" href="#dhcp-for-ipoib" title="Permanent link">&para;</a></h3>
<p>我们使用 dnsmasq 作为 DHCP 服务器。在 dnsmasq 官方示例中有这样一段：</p>
<div class="language-text highlight"><span class="filename">dnsmasq.conf</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a># Always give the InfiniBand interface with hardware address
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a># 80:00:00:48:fe:80:00:00:00:00:00:00:f4:52:14:03:00:28:05:81 the
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a># ip address 192.168.0.61. The client id is derived from the prefix
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a># ff:00:00:00:00:00:02:00:00:02:c9:00 and the last 8 pairs of
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a># hex digits of the hardware address.
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a># dhcp-host=id:ff:00:00:00:00:00:02:00:00:02:c9:00:f4:52:14:03:00:28:05:81,192.168.0.61
</span></code></pre></div>
<p>可能是因为 InfiniBand 迭代，现在已经不适用了。我们在 NVIDIA 的某份文档（忘掉是哪份了）中看到了这样的写法：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>id:20 + 硬件地址后 8 对十六进制数字
</span></code></pre></div>
<p>这是可行的。</p>
<h3 id="benchmark">Benchmark<a class="headerlink" href="#benchmark" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/linux-rdma/perftest"><code>perftest</code></a> 软件包由 <code>linux-rdma</code> 维护，用于测试 InfiniBand 性能，可用于 RoCE。</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># 客户端</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>ib_write_lat<span class="w"> </span>--ib-dev<span class="o">=</span>mlx5_0<span class="w"> </span>--ib-port<span class="o">=</span><span class="m">1</span><span class="w"> </span>MAX01-ib<span class="w"> </span>-a<span class="w"> </span>-R
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="c1"># 服务端</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>ib_write_lat<span class="w"> </span>--ib-dev<span class="o">=</span>mlx5_0<span class="w"> </span>--ib-port<span class="o">=</span><span class="m">1</span><span class="w"> </span>-R<span class="w"> </span>-a
</span></code></pre></div>
<h3 id="其他">其他<a class="headerlink" href="#其他" title="Permanent link">&para;</a></h3>
<p>一个用于看 IB 卡实时流量的脚本：</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="c1"># Author: Chen Jinlong</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="c1"># Usage: ib_monitor.sh [interval]</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="nb">declare</span><span class="w"> </span>-A<span class="w"> </span>old_recv_bytes<span class="p">;</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="nb">declare</span><span class="w"> </span>-A<span class="w"> </span>old_recv_packets<span class="p">;</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="nb">declare</span><span class="w"> </span>-A<span class="w"> </span>old_xmit_bytes<span class="p">;</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="nb">declare</span><span class="w"> </span>-A<span class="w"> </span>old_xmit_packets<span class="p">;</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="nv">interval</span><span class="o">=</span><span class="nv">$1</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="nv">$interval</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">    </span><span class="nv">interval</span><span class="o">=</span><span class="m">1</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="k">fi</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="k">for</span><span class="w"> </span>ib_dev<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>ls<span class="w"> </span>/sys/class/infiniband/<span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="w">    </span><span class="nv">counter_dir</span><span class="o">=</span><span class="s2">&quot;/sys/class/infiniband/</span><span class="nv">$ib_dev</span><span class="s2">/ports/1/counters&quot;</span>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">    </span>old_recv_bytes<span class="o">[</span><span class="nv">$ib_dev</span><span class="o">]=</span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$counter_dir</span>/port_rcv_data<span class="k">)</span>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">    </span>old_recv_packets<span class="o">[</span><span class="nv">$ib_dev</span><span class="o">]=</span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$counter_dir</span>/port_rcv_packets<span class="k">)</span>
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">    </span>old_xmit_bytes<span class="o">[</span><span class="nv">$ib_dev</span><span class="o">]=</span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$counter_dir</span>/port_xmit_data<span class="k">)</span>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="w">    </span>old_xmit_packets<span class="o">[</span><span class="nv">$ib_dev</span><span class="o">]=</span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$counter_dir</span>/port_xmit_packets<span class="k">)</span>
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="k">done</span>
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a>
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="k">while</span><span class="w"> </span>true<span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="w">    </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;%-10s %12s %12s %12s %12s\n&quot;</span><span class="w"> </span>Device<span class="w"> </span>recv_MBps<span class="w"> </span>recv_kpps<span class="w"> </span>xmit_MBps<span class="w"> </span>xmit_kpps
</span><span id="__span-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span>ib_dev<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>ls<span class="w"> </span>/sys/class/infiniband/<span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-8-27"><a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a><span class="w">        </span><span class="nv">counter_dir</span><span class="o">=</span><span class="s2">&quot;/sys/class/infiniband/</span><span class="nv">$ib_dev</span><span class="s2">/ports/1/counters&quot;</span>
</span><span id="__span-8-28"><a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a><span class="w">        </span><span class="nv">new_recv_bytes</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$counter_dir</span>/port_rcv_data<span class="k">)</span>
</span><span id="__span-8-29"><a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a><span class="w">        </span><span class="nv">new_recv_packets</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$counter_dir</span>/port_rcv_packets<span class="k">)</span>
</span><span id="__span-8-30"><a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a><span class="w">        </span><span class="nv">new_xmit_bytes</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$counter_dir</span>/port_xmit_data<span class="k">)</span>
</span><span id="__span-8-31"><a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a><span class="w">        </span><span class="nv">new_xmit_packets</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$counter_dir</span>/port_xmit_packets<span class="k">)</span>
</span><span id="__span-8-32"><a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a>
</span><span id="__span-8-33"><a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a><span class="w">        </span><span class="nv">recv_MBps</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2; ( </span><span class="nv">$new_recv_bytes</span><span class="s2"> - </span><span class="si">${</span><span class="nv">old_recv_bytes</span><span class="p">[</span><span class="nv">$ib_dev</span><span class="p">]</span><span class="si">}</span><span class="s2"> ) / 256.0 / 1024.0 / </span><span class="nv">$interval</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="k">)</span>
</span><span id="__span-8-34"><a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a><span class="w">        </span><span class="nv">recv_kpps</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2; ( </span><span class="nv">$new_recv_packets</span><span class="s2"> - </span><span class="si">${</span><span class="nv">old_recv_packets</span><span class="p">[</span><span class="nv">$ib_dev</span><span class="p">]</span><span class="si">}</span><span class="s2"> ) / 1000.0 / </span><span class="nv">$interval</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="k">)</span>
</span><span id="__span-8-35"><a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a><span class="w">        </span><span class="nv">xmit_MBps</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2; ( </span><span class="nv">$new_xmit_bytes</span><span class="s2"> - </span><span class="si">${</span><span class="nv">old_xmit_bytes</span><span class="p">[</span><span class="nv">$ib_dev</span><span class="p">]</span><span class="si">}</span><span class="s2"> ) / 256.0 / 1024.0 / </span><span class="nv">$interval</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="k">)</span>
</span><span id="__span-8-36"><a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a><span class="w">        </span><span class="nv">xmit_kpps</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2; ( </span><span class="nv">$new_xmit_packets</span><span class="s2"> - </span><span class="si">${</span><span class="nv">old_xmit_packets</span><span class="p">[</span><span class="nv">$ib_dev</span><span class="p">]</span><span class="si">}</span><span class="s2"> ) / 1000.0 / </span><span class="nv">$interval</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="k">)</span>
</span><span id="__span-8-37"><a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a>
</span><span id="__span-8-38"><a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a><span class="w">        </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;%-10s %12s %12s %12s %12s\n&quot;</span><span class="w"> </span><span class="nv">$ib_dev</span><span class="w"> </span><span class="nv">$recv_MBps</span><span class="w"> </span><span class="nv">$recv_kpps</span><span class="w"> </span><span class="nv">$xmit_MBps</span><span class="w"> </span><span class="nv">$xmit_kpps</span>
</span><span id="__span-8-39"><a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a>
</span><span id="__span-8-40"><a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a><span class="w">        </span>old_recv_bytes<span class="o">[</span><span class="nv">$ib_dev</span><span class="o">]=</span><span class="nv">$new_recv_bytes</span>
</span><span id="__span-8-41"><a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a><span class="w">        </span>old_recv_packets<span class="o">[</span><span class="nv">$ib_dev</span><span class="o">]=</span><span class="nv">$new_recv_packets</span>
</span><span id="__span-8-42"><a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a><span class="w">        </span>old_xmit_bytes<span class="o">[</span><span class="nv">$ib_dev</span><span class="o">]=</span><span class="nv">$new_xmit_bytes</span>
</span><span id="__span-8-43"><a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a><span class="w">        </span>old_xmit_packets<span class="o">[</span><span class="nv">$ib_dev</span><span class="o">]=</span><span class="nv">$new_xmit_packets</span>
</span><span id="__span-8-44"><a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a><span class="w">    </span><span class="k">done</span>
</span><span id="__span-8-45"><a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a><span class="w">    </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\n&quot;</span>
</span><span id="__span-8-46"><a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a>
</span><span id="__span-8-47"><a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a><span class="w">    </span>sleep<span class="w"> </span><span class="nv">$interval</span>
</span><span id="__span-8-48"><a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a><span class="k">done</span>
</span></code></pre></div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="July 15, 2025 08:22:08 UTC">July 15, 2025</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="July 15, 2025 08:22:08 UTC">July 15, 2025</span>
  </span>

    
    
    
      
  <span class="md-source-file__fact">
    
      
  <span class="md-icon" title="Contributors">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </span>
  <span>GitHub</span>

    
    <nav>
      
        <a href="https://github.com/bowling233" class="md-author" title="@bowling233">
          
          <img src="https://avatars.githubusercontent.com/u/35755846?v=4&size=72" alt="bowling233">
        </a>
      
      
      
    </nav>
  </span>

    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: 网络运维">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                网络运维
              </div>
            </div>
          </a>
        
        
          
          <a href="../network-technology/ipv6/" class="md-footer__link md-footer__link--next" aria-label="Next: IPv6">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                IPv6
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      ZJUSCT
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate", "navigation.footer", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.tracking", "navigation.path", "navigation.top", "toc.follow", "content.action.edit", "search.suggest", "search.highlight", "search.share"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/polyfill/index.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/tablesort/dist/tablesort.min.js"></script>
      
        <script src="../../../javascripts/tablesort.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>